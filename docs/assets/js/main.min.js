function getPizzaData(){return{meat:[{id:1,namePizza:"Meat",description:"Assortment of beef, ham, pepperoni and bacon",price:{22:12,28:16,33:20},image:"meat-pizza",ingredients:["beef","ham","pepperoni","bacon","mozzarella","tomato sauce"]},{id:2,namePizza:"Argentina",description:"Juicy Argentinian beef with herbs",price:{22:13,28:17,33:21},image:"argentina-pizza",ingredients:["beef","herbs","onions","bell peppers","mozzarella","tomato sauce"]},{id:3,namePizza:"Venecia",description:"Venetian style with Italian sausages",price:{22:12,28:16,33:20},image:"venecia-pizza",ingredients:["Italian sausages","olives","onions","bell peppers","mozzarella"]},{id:4,namePizza:"Pepperoni Classic",description:"Double pepperoni with extra cheese",price:{22:11,28:15,33:19},image:"meat-pizza",ingredients:["pepperoni","mozzarella","tomato sauce","oregano"]},{id:5,namePizza:"BBQ Chicken",description:"Grilled chicken with BBQ sauce",price:{22:12,28:16,33:20},image:"meat-pizza",ingredients:["chicken","BBQ sauce","red onions","mozzarella","corn"]}],vegetarian:[{id:6,namePizza:"Cheese",description:"Mozzarella, gorgonzola, parmesan and ricotta",price:{22:10,28:14,33:18},image:"cheese-pizza",ingredients:["mozzarella","gorgonzola","parmesan","ricotta","tomato sauce"]},{id:7,namePizza:"Tomato",description:"Classic with fresh tomatoes and basil",price:{22:9,28:13,33:17},image:"tomato-pizza",ingredients:["fresh tomatoes","basil","mozzarella","tomato sauce"]},{id:8,namePizza:"Italian",description:"Traditional Italian recipe",price:{22:8.35,28:15.33,33:19.6},image:"italian-pizza",ingredients:["prosciutto","arugula","parmesan","mozzarella","tomato sauce"]},{id:9,namePizza:"Italian x2",description:"Double portion of Italian ingredients",price:{22:13,28:17,33:21},image:"italian-x2-pizza",ingredients:["prosciutto","salami","olives","mozzarella","tomato sauce"]},{id:10,namePizza:"Vegetarian",description:"Fresh vegetables and herbs",price:{22:11,28:15,33:19},image:"tomato-pizza",ingredients:["bell peppers","tomatoes","onions","olives","mushrooms","mozzarella"]},{id:11,namePizza:"Mediterranean",description:"Sun-dried tomatoes, olives and feta cheese",price:{22:12,28:16,33:20},image:"meat-pizza",ingredients:["sun-dried tomatoes","olives","feta cheese","spinach","mozzarella"]}],mushroom:[{id:12,namePizza:"Gribnaya",description:"Assorted mushrooms with creamy sauce",price:{22:10,28:14,33:18},image:"mushroom-pizza",ingredients:["champignons","porcini mushrooms","creamy sauce","mozzarella","thyme"]},{id:13,namePizza:"Forest Mushroom",description:"Wild forest mushrooms with herbs",price:{22:11,28:15,33:19},image:"argentina-pizza",ingredients:["wild mushrooms","herbs","garlic","mozzarella","cream sauce"]},{id:14,namePizza:"Truffle Mushroom",description:"Mushrooms with truffle oil",price:{22:13,28:17,33:21},image:"mushroom-pizza",ingredients:["mushrooms","truffle oil","parmesan","mozzarella","cream sauce"]}],sea_products:[{id:15,namePizza:"Seafood Mix",description:"Shrimps, squid and mussels",price:{22:14,28:18,33:22},image:"argentina-pizza",ingredients:["shrimps","squid","mussels","garlic","mozzarella","white sauce"]},{id:16,namePizza:"Tuna & Corn",description:"Tuna with sweet corn and onions",price:{22:12,28:16,33:20},image:"venecia-pizza",ingredients:["tuna","sweet corn","red onions","mozzarella","tomato sauce"]},{id:17,namePizza:"Salmon Supreme",description:"Smoked salmon with cream cheese",price:{22:15,28:19,33:23},image:"cheese-pizza",ingredients:["smoked salmon","cream cheese","capers","red onions","dill"]}]}}function getUtils(){return{formatPrice(e,a="en-US"){return new Intl.NumberFormat(a,{minimumFractionDigits:0,maximumFractionDigits:2}).format(e)},saveCart(e){localStorage.setItem("cart",JSON.stringify(e))},removeCards(){topContainerCards.innerHTML="",bottomContainerCards.innerHTML=""},renderCard(e){var a=e.ingredients.slice(0,3).join(", "),i=e.ingredients.slice(3).join(", "),t=Object.values(e.price)[0],r=Object.entries(e.price).map(([e,a],i)=>`
      <label class="pizza-card__size-label">
        <input class="pizza-card__size-radio visually-hidden" 
               data-price="${a}" 
               type="radio" 
               name="size" 
               value="${e}" 
               ${0===i?"checked":""} />
        <span class="pizza-card__size-text">${e}</span>
      </label>
    `).join("");return`
    <article data-id="${e.id}" class="pizza-card">
      <header class="pizza-card__header">
        <figure class="pizza-card__figure">
          <img class="pizza-card__img" src="./assets/img/pizza/${e.image}.png" alt="${e.namePizza}" />
        </figure>
        <h3 class="pizza-card__title">${e.namePizza}</h3>
      </header>
      <div class="pizza-card__ingredients">
        <p class="pizza-card__first-line text-ellipsis">
          Filling: ${a}
        </p>
        ${i?`
          <p class="pizza-card__second-line text-ellipsis">
            ${i}
          </p>
        `:""}
      </div>
    
      <form class="pizza-card__form">
        ${r}
      </form>
    
      <button class="pizza-card__customize-btn">
        <span class="text-gradient ps-rel-idx-100">+ Ingredients</span>
      </button>
      <div class="pizza-card__order-controls">
        <p class="pizza-card__price text-ellipsis">
          <span class="total-price">${t}</span>
          <span class="pizza-card__currency">$</span>
        </p>
        <div class="pizza-card__quantity-controls">
          <button disabled class="pizza-card__quantity-btn decrement-pizza">
            <svg width="8" height="2" viewBox="0 0 12 2">
              <path d="M0 1H12" stroke="currentColor" stroke-width="2" />
            </svg>
          </button>
          <p class="pizza-card__quantity">1</p>
          <button class="pizza-card__quantity-btn pizza-card__quantity-btn--active increment-pizza">
            <svg width="8" height="8" viewBox="0 0 12 12">
              <path d="M0 6H12M6 0V12" stroke="currentColor" stroke-width="2" />
            </svg>
          </button>
        </div>
      </div>
      <button class="pizza-card__order btn btn--accent btn--small">
        Order Now
      </button>
    </article>
  `}}}let pizzaProducts=getPizzaData(),utils=getUtils(),$menuPizza=document.getElementById("menuPizza"),$cartBtn=document.getElementById("cartBtn");function initHeaderListUi(){let a=document.querySelectorAll(".header .link-nav");a.forEach(e=>{e.addEventListener("click",e=>{a.forEach(e=>e.classList.remove("link-nav--active")),e.target.classList.add("link-nav--active")})})}initHeaderListUi();let $tabs=document.getElementById("tabs"),$allTab=document.querySelectorAll(".menu__tab-btn button"),topContainerCards=document.getElementById("top-cards"),bottomContainerCards=document.getElementById("bottom-cards");function renderAllCards(e,a){return e.map(e=>a(e))}$tabs.addEventListener("click",i=>{i=i.target.closest("button");if(i){var t=i.getAttribute("data-category"),i=($allTab.forEach(e=>{e.classList.remove("btn--accent");e=e.closest("li");e&&e.classList.remove("menu__tab-btn--active")}),i.classList.add("btn--accent"),i.closest("li"));if(i&&i.classList.add("menu__tab-btn--active"),utils.removeCards(),"all"===t){var i=Object.values(pizzaProducts).flat();console.log(i);let e=i.slice(0,4),a=i.slice(4);e.length&&(i=renderAllCards(e,utils.renderCard),topContainerCards.innerHTML=""+i.join("")),void(a.length&&(i=renderAllCards(a,utils.renderCard),bottomContainerCards.innerHTML=""+i.join("")))}else{let e=pizzaProducts[t].slice(0,4),a=pizzaProducts[t].slice(4);e.length&&(i=renderAllCards(e,utils.renderCard),topContainerCards.innerHTML=""+i.join("")),a.length&&(t=renderAllCards(a,utils.renderCard),bottomContainerCards.innerHTML=""+t.join(""))}}});let savedCart=localStorage.getItem("cart"),cart=savedCart?JSON.parse(savedCart):{};$menuPizza.addEventListener("click",e=>{var a,i;e.target.closest(".pizza-card__order")&&(e=e.target.closest(".pizza-card"))&&(a=+e.getAttribute("data-id"),i=e.querySelector(".pizza-card__quantity"),e=e.querySelector('input[name="size"]:checked'),i=+i.textContent,e=e.value,cart[a]?cart[a][e]=(cart[a][e]||0)+i:(console.log("записываем"),cart[a]={[e]:i}),console.log(cart),utils.saveCart(cart))}),$menuPizza.addEventListener("click",a=>{if(a.target.closest(".pizza-card__quantity-btn")){var i=a.target.closest(".pizza-card"),t=i.querySelector(".pizza-card__form").querySelector('input[name="size"]:checked');if(i){i.getAttribute("data-id");var r=i.querySelector(".pizza-card__quantity"),n=i.querySelector(".total-price");if(r){console.log(t,"$selectedSizeRadio");let e=+r.textContent;t=+t.getAttribute("data-price"),a=a.target.closest(".pizza-card__quantity-btn");a.classList.contains("increment-pizza")?(1<++e&&e<3&&(i.querySelector(".decrement-pizza").disabled=!1),9<e&&(a.disabled=!0)):8<--e&&e<10&&(i.querySelector(".increment-pizza").disabled=!1),n.textContent=utils.formatPrice(e*t),(r.textContent=e)<2&&(a.disabled=!0)}}}}),$menuPizza.addEventListener("change",e=>{var a,i;e.target.closest(".pizza-card__size-radio")&&(i=(a=e.target.closest(".pizza-card")).querySelector(".pizza-card__quantity"),a=a.querySelector(".total-price"),i=+i.textContent,e=+e.target.getAttribute("data-price"),a.textContent=utils.formatPrice(i*e))});